
# FitAI Coach 软件安装说明书

## 1. 系统要求

### 1.1 硬件要求
- **处理器**: Intel Core i3 或 AMD 同等级别处理器
- **内存**: 最少 4GB RAM，推荐 8GB 或更多
- **存储空间**: 至少 1GB 可用磁盘空间
- **网络**: 稳定的互联网连接（用于AI功能）

### 1.2 软件要求
- **操作系统**: 
  - Windows 10/11 (64位)
  - macOS 10.14 或更高版本
  - Linux Ubuntu 18.04 或更高版本
- **Java运行环境**: JDK 17 或更高版本
- **数据库**: MySQL 8.0+ 或使用内置H2数据库
- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

## 2. 环境准备

### 2.1 安装Java 17

#### Windows系统
1. 访问 [Oracle官网](https://www.oracle.com/java/technologies/downloads/) 下载JDK 17
2. 运行安装程序，按照向导完成安装
3. 配置环境变量：
   - 添加 `JAVA_HOME` 指向JDK安装目录
   - 将 `%JAVA_HOME%\bin` 添加到 `PATH` 环境变量

#### 验证Java安装
```bash
java -version
javac -version
```

### 2.2 安装Maven（可选）
如果需要从源码构建，请安装Apache Maven：

#### Windows系统
1. 下载Maven二进制包
2. 解压到指定目录
3. 配置环境变量：
   - 添加 `MAVEN_HOME` 指向Maven目录
   - 将 `%MAVEN_HOME%\bin` 添加到 `PATH`

#### 验证Maven安装
```bash
mvn -version
```

### 2.3 数据库准备

#### 选项1：使用MySQL（推荐生产环境）
1. 安装MySQL 8.0+
2. 创建数据库：
```sql
CREATE DATABASE fitai_coach CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```
3. 创建用户并授权：
```sql
CREATE USER 'fitai_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON fitai_coach.* TO 'fitai_user'@'localhost';
FLUSH PRIVILEGES;
```

#### 选项2：使用H2数据库（开发/测试环境）
无需额外安装，应用内置H2数据库支持。

## 3. 软件安装

### 3.1 获取软件包

#### 方式1：下载预编译包（推荐）
1. 从发布页面下载 `fitai-coach-1.0.0.jar`
2. 下载配置文件 `application.yml`

#### 方式2：从源码构建
1. 克隆或下载源代码
2. 进入项目根目录
3. 执行构建命令：
```bash
mvn clean package -DskipTests
```
4. 构建完成后，在 `target` 目录找到 `fitai-coach-1.0.0.jar`

### 3.2 配置应用

#### 3.2.1 数据库配置
编辑 `application.yml` 文件：

**MySQL配置示例：**
```yaml
spring:
  application:
    name: fitai-coach
  datasource:
    url: jdbc:mysql://localhost:3306/fitai_coach?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: fitai_user
    password: your_password
    driver-class-name: com.mysql.cj.jdbc.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
```

**H2数据库配置示例：**
```yaml
spring:
  application:
    name: fitai-coach
  datasource:
    url: jdbc:h2:file:./data/fitai_coach
    username: sa
    password: 
    driver-class-name: org.h2.Driver
  h2:
    console:
      enabled: true
  jpa:
    hibernate:
      ddl-auto: update
```

#### 3.2.2 服务器配置
```yaml
server:
  port: 8080
  servlet:
    context-path: /
    encoding:
      charset: UTF-8
```

#### 3.2.3 AI服务配置（可选）
如需使用AI功能，配置相关API密钥：
```yaml
ai:
  openai:
    api-key: your_openai_api_key
    base-url: https://api.openai.com/v1
    model: gpt-3.5-turbo
    max-tokens: 1000
```

### 3.3 启动应用

#### 3.3.1 命令行启动
```bash
java -jar fitai-coach-1.0.0.jar
```

#### 3.3.2 指定配置文件启动
```bash
java -jar fitai-coach-1.0.0.jar --spring.config.location=classpath:/application.yml,./application.yml
```

#### 3.3.3 指定端口启动
```bash
java -jar fitai-coach-1.0.0.jar --server.port=9090
```

#### 3.3.4 后台运行（Linux/macOS）
```bash
nohup java -jar fitai-coach-1.0.0.jar > fitai.log 2>&1 &
```

#### 3.3.5 Windows服务方式运行
可以使用工具如 NSSM 将应用注册为Windows服务。

## 4. 验证安装

### 4.1 检查应用状态
1. 启动应用后，查看控制台输出
2. 确认看到类似信息：
```
Started FitaiApplication in X.XXX seconds
```

### 4.2 访问应用
1. 打开浏览器
2. 访问：`http://localhost:8080`
3. 应该看到FitAI Coach主页

### 4.3 功能测试
1. 尝试创建用户账户
2. 登录系统
3. 创建训练计划
4. 测试AI建议功能（如已配置）

## 5. 常见问题解决

### 5.1 端口占用问题
**错误信息**: `Port 8080 was already in use`

**解决方案**:
1. 更改端口：在 `application.yml` 中修改 `server.port`
2. 或者停止占用8080端口的其他应用

### 5.2 数据库连接失败
**错误信息**: `Could not create connection to database server`

**解决方案**:
1. 检查数据库服务是否启动
2. 验证数据库连接信息（主机、端口、用户名、密码）
3. 确认数据库已创建
4. 检查防火墙设置

### 5.3 Java版本不兼容
**错误信息**: `UnsupportedClassVersionError`

**解决方案**:
1. 确认Java版本：`java -version`
2. 升级到JDK 17或更高版本
3. 确保 `JAVA_HOME` 指向正确版本

### 5.4 内存不足
**错误信息**: `OutOfMemoryError`

**解决方案**:
```bash
java -Xmx2g -jar fitai-coach-1.0.0.jar
```

### 5.5 AI功能无法使用
**可能原因**:
1. API密钥未配置或无效
2. 网络连接问题
3. API配额已用完

**解决方案**:
1. 检查API密钥配置
2. 测试网络连接
3. 查看API使用情况

## 6. 日志和监控

### 6.1 日志文件位置
- 默认日志文件：`logs/fitai-coach.log`
- 控制台输出包含启动信息和错误信息

### 6.2 日志级别配置
在 `application.yml` 中配置：
```yaml
logging:
  level:
    com.fitai: DEBUG
    org.springframework: INFO
  file:
    name: logs/fitai-coach.log
```

### 6.3 健康检查
应用提供健康检查端点：
- 访问：`http://localhost:8080/actuator/health`

## 7. 安全建议

### 7.1 生产环境配置
1. 更改默认密码
2. 使用HTTPS
3. 配置防火墙
4. 定期备份数据库
5. 监控应用日志

### 7.2 数据备份
定期备份MySQL数据库：
```bash
mysqldump -u fitai_user -p fitai_coach > backup_$(date +%Y%m%d).sql
```

## 8. 卸载说明

### 8.1 停止应用
1. 如果在前台运行，按 `Ctrl+C`
2. 如果在后台运行，找到进程ID并终止：
```bash
ps aux | grep fitai-coach
kill <process_id>
```

### 8.2 清理文件
1. 删除应用JAR文件
2. 删除配置文件
3. 删除日志文件
4. 删除数据库（如需要）

## 9. 技术支持

如遇到安装或使用问题，请：
1. 查看应用日志文件
2. 检查系统要求是否满足

---


        